"use strict";var e=require("postcss-value-parser");const t=/calc\(/gim;const creator=r=>{const a=Object.assign({preserve:!0},r);return{postcssPlugin:"postcss-nested-calc",Declaration(r,{result:s}){if((r.value.match(t)||[]).length<2)return;if(r.variable)return;const c=r.value;let n;try{n=e(c)}catch(e){return void r.warn(s,`Failed to parse value '${c}'. Leaving the original value intact.`)}if(void 0===n)return;e.walk(n.nodes,(t=>{t.type&&"function"===t.type&&"calc"===t.value.toLowerCase()&&e.walk(t.nodes,(e=>{if(e.type&&"function"===e.type)return"calc"===e.value.toLowerCase()&&void(e.value="")}))}),!0);const l=String(n);l!==c&&(a.preserve?r.cloneBefore({value:l}):r.replaceWith(r.clone({value:l})))}}};creator.postcss=!0,module.exports=creator;
