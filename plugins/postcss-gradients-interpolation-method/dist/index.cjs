"use strict";var e=require("@csstools/postcss-progressive-custom-properties"),t=require("postcss-value-parser");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=o(e),r=o(t);function s(e,t){const o=[];let n={color:"",colorStopLength:"",colorHintBetween:[],nodes:[]};for(let t=0;t<e.length;t++){const r=e[t];"div"!==r.type||","!==r.value?n.nodes.push(r):(o.push(n),n={color:"",colorStopLength:"",colorHintBetween:[],nodes:[]})}o.push(n);const s=[];for(let e=0;e<o.length;e++){const t=o[e];switch(t.nodes.length){case 0:break;case 1:return!1;case 2:t.color=r.default.stringify(t.nodes[0]),t.colorStopLength=r.default.stringify(t.nodes[1]),s.push(t);break;case 3:s.push({color:r.default.stringify(t.nodes[0]),colorStopLength:r.default.stringify(t.nodes[1]),colorHintBetween:[],nodes:[t.nodes[0],t.nodes[1]]}),s.push({color:r.default.stringify(t.nodes[0]),colorStopLength:r.default.stringify(t.nodes[2]),colorHintBetween:[],nodes:[t.nodes[0],t.nodes[2]]})}}for(let e=0;e<s.length;e++){const o=s[e];o.color||(o.color=`color-mix(in ${t}, ${s[e-1].color} 50%, ${s[e+1].color} 50%)`,o.colorHintBetween=[s[e-1],s[e+1]])}return s}function i(e){return e.includes("in ")&&(e.includes("conic-gradient(")||e.includes("linear-gradient(")||e.includes("radial-gradient(")||e.includes("repeating-conic-gradient(")||e.includes("repeating-linear-gradient(")||e.includes("repeating-radial-gradient("))}const l=["shorter","longer","increasing","decreasing","specified"],a=e=>({postcssPlugin:"postcss-gradients-interpolation-method",Declaration(t,{result:o}){if(!i(t.value))return;if(function(e){let t=e.parent;for(;t;)if("atrule"===t.type){if("supports"===t.name&&i(t.params))return!0;t=t.parent}else t=t.parent;return!1}(t))return;let n;try{n=r.default(t.value)}catch(e){t.warn(o,`Failed to parse value '${t.value}' as a CSS gradient. Leaving the original value intact.`)}if(void 0===n)return;let a=!1;if(n.walk((e=>{if("function"!==e.type||"conic-gradient"!==(t=e.value)&&"linear-gradient"!==t&&"radial-gradient"!==t&&"repeating-conic-gradient"!==t&&"repeating-linear-gradient"!==t&&"repeating-radial-gradient"!==t)return;var t;const o=e.nodes.filter((e=>"comment"!==e.type&&"space"!==e.type)),n={interpolationArguments:[],argumentsRemainder:[],colorStops:[]};for(let e=0;e<o.length;e++){const t=o[e];if("div"===t.type&&","===t.value){const t=n.interpolationArguments.map((e=>r.default.stringify(e))).join(" "),i=s(o.slice(e),t);if(i){n.colorStops=i;break}t&&(a=!0);break}if("word"===t.type&&"in"===t.value&&o[e+1]){if(n.interpolationArguments.push(o[e+1]),e++,o[e+1]&&"word"===o[e+1].type&&l.includes(o[e+1].value)){n.interpolationArguments.push(o[e+1]),e++;continue}}else n.argumentsRemainder.push(t)}if(!n.interpolationArguments.length||!n.colorStops.length)return;e.nodes=[],n.argumentsRemainder.length&&(e.nodes.push(...n.argumentsRemainder.flatMap((e=>[e,{type:"space",value:" "}]))),e.nodes.push({type:"div",value:","}));const i=n.interpolationArguments.map((e=>r.default.stringify(e))).join(" ");for(let t=0;t<n.colorStops.length;t++){const o=n.colorStops[t],s=n.colorStops[t+1];if(s)if(o.color!==s.color)for(let t=0;t<10;t++){if(0===t){e.nodes.push(r.default(`${o.color} ${o.colorStopLength}`),{type:"div",value:","});continue}const n=`color-mix(in ${i}, ${o.color} ${100-10*t}%, ${s.color} ${10*t}%)`,l=`calc(${o.colorStopLength} + ((${s.colorStopLength} - ${o.colorStopLength}) * ${t/10}))`;e.nodes.push(r.default(`${n} ${l}`),{type:"div",value:","})}else e.nodes.push(r.default(`${o.color} ${o.colorStopLength}`),{type:"div",value:","});else e.nodes.push(r.default(`${o.color} ${o.colorStopLength}`))}})),a)return void t.warn(o,`Failed to parse value '${t.value}' as a CSS gradient with interpolation. Leaving the original value intact.`);const c=r.default.stringify(n);c!==t.value&&(e.preserve?t.cloneBefore({prop:t.prop,value:c}):t.value=c)}});a.postcss=!0;const c=e=>{const t=Object.assign({enableProgressiveCustomProperties:!0,preserve:!0},e);return t.enableProgressiveCustomProperties&&t.preserve?{postcssPlugin:"postcss-gradients-interpolation-method",plugins:[n.default(),a(t)]}:a(t)};c.postcss=!0,module.exports=c;
