"use strict";var e=require("@csstools/postcss-progressive-custom-properties"),o=require("@csstools/css-color-parser"),n=require("@csstools/css-parser-algorithms"),i=require("@csstools/css-tokenizer");function interpolateColorsInColorStopsList(e,s,t){const r=[];for(let l=0;l<e.length-1;l++){const a=e[l],p=e[l+1];r.push(a.color,new n.WhitespaceNode([[i.TokenType.Whitespace," ",-1,-1,void 0]]),a.position,new n.TokenNode([i.TokenType.Comma,",",-1,-1,void 0]),new n.WhitespaceNode([[i.TokenType.Whitespace," ",-1,-1,void 0]]));for(let e=1;e<=9;e++){const l=10*e;let c=[];t&&(c=[new n.WhitespaceNode([[i.TokenType.Whitespace," ",-1,-1,void 0]]),t,new n.WhitespaceNode([[i.TokenType.Whitespace," ",-1,-1,void 0]]),new n.TokenNode([i.TokenType.Ident,"hue",-1,-1,{value:"hue"}])]);const u=new n.FunctionNode([i.TokenType.Function,"color-mix(",-1,-1,{value:"color-mix"}],[i.TokenType.CloseParen,")",-1,-1,void 0],[new n.TokenNode([i.TokenType.Ident,"in",-1,-1,{value:"in"}]),new n.WhitespaceNode([[i.TokenType.Whitespace," ",-1,-1,void 0]]),s,...c,new n.TokenNode([i.TokenType.Comma,",",-1,-1,void 0]),new n.WhitespaceNode([[i.TokenType.Whitespace," ",-1,-1,void 0]]),a.color,new n.WhitespaceNode([[i.TokenType.Whitespace," ",-1,-1,void 0]]),new n.TokenNode([i.TokenType.Percentage,100-l+"%",-1,-1,{value:100-l}]),new n.TokenNode([i.TokenType.Comma,",",-1,-1,void 0]),new n.WhitespaceNode([[i.TokenType.Whitespace," ",-1,-1,void 0]]),p.color,new n.WhitespaceNode([[i.TokenType.Whitespace," ",-1,-1,void 0]]),new n.TokenNode([i.TokenType.Percentage,`${l}%`,-1,-1,{value:l}])]),d=o.color(u);if(!d)return!1;const T=o.serializeRGB(d);r.push(T,new n.TokenNode([i.TokenType.Comma,",",-1,-1,void 0]),new n.WhitespaceNode([[i.TokenType.Whitespace," ",-1,-1,void 0]]))}l===e.length-2&&r.push(p.color,new n.WhitespaceNode([[i.TokenType.Whitespace," ",-1,-1,void 0]]),p.position)}return r}const s=/(repeating-)?(linear|radial|conic)-gradient\(/i,t=/^(repeating-)?(linear|radial|conic)-gradient$/i;function hasSupportsAtRuleAncestor(e){let o=e.parent;for(;o;)if("atrule"===o.type){if("supports"===o.name&&s.test(o.params))return!0;o=o.parent}else o=o.parent;return!1}const r=/^(srgb|srgb-linear|lab|oklab|xyz|xyz-d50|xyz-d65|hsl|hwb|lch|oklch)$/i,l=/^(hsl|hwb|lch|oklch)$/i,a=/^(shorter|longer|increasing|decreasing)$/i,p=/^in$/i,c=/^hue$/i,basePlugin=e=>({postcssPlugin:"postcss-gradients-interpolation-method",Declaration(u){if(!s.test(u.value))return;if(hasSupportsAtRuleAncestor(u))return;const d=i.tokenize({css:u.value}),T=n.stringify(n.replaceComponentValues(n.parseCommaSeparatedListOfComponentValues(d),(e=>{if(!n.isFunctionNode(e))return;const s=e.getName();if(!t.test(s))return;let u="srgb",d=null,T=null,v=null,h=null,k=null,m=[];{let o=0,s=e.value[o];for(;!n.isTokenNode(s)||s.value[0]!==i.TokenType.Ident||!p.test(s.value[4].value);){if(n.isTokenNode(s)&&s.value[0]===i.TokenType.Comma)return;o++,s=e.value[o]}for(d=s,o++,s=e.value[o];n.isCommentNode(s)||n.isWhitespaceNode(s);)o++,s=e.value[o];if(n.isTokenNode(s)&&s.value[0]===i.TokenType.Ident&&r.test(s.value[4].value)){if(T)return;T=s,u=s.value[4].value,o++,s=e.value[o]}for(;n.isCommentNode(s)||n.isWhitespaceNode(s);)o++,s=e.value[o];if(n.isTokenNode(s)&&s.value[0]===i.TokenType.Ident&&a.test(s.value[4].value)&&l.test(u)){if(v||!T)return;v=s,o++,s=e.value[o]}for(;n.isCommentNode(s)||n.isWhitespaceNode(s);)o++,s=e.value[o];if(n.isTokenNode(s)&&s.value[0]===i.TokenType.Ident&&c.test(s.value[4].value)){if(h||!T||!v)return;h=s,o++,s=e.value[o]}for(;!n.isTokenNode(s)||s.value[0]!==i.TokenType.Comma;)o++,s=e.value[o];k=s,m=e.value.slice(o+1)}if(!T)return;if(v&&!h)return;if(h&&!v)return;const f=[];let N={};for(let e=0;e<m.length;e++){const s=m[e];if(n.isCommentNode(s)||n.isWhitespaceNode(s))continue;if(n.isTokenNode(s)&&s.value[0]===i.TokenType.Comma){if(N.color&&N.positionA){f.push({color:N.color,position:N.positionA}),N.positionB&&f.push({color:N.color,position:N.positionB}),N={};continue}return}const t=o.color(s);if(t&&N.color)return;if(t)N.color=s;else{if(N.positionA)return void(N.positionA&&!N.positionB&&(N.positionB=s));N.positionA=s}}if(!N.color||!N.positionA)return;f.push({color:N.color,position:N.positionA}),N.positionB&&f.push({color:N.color,position:N.positionB});const y=interpolateColorsInColorStopsList(f,T,v);if(!y)return;const g=[...e.value.slice(0,e.value.indexOf(d)),...e.value.slice(e.value.indexOf(h||T)+1,e.value.indexOf(k))];g.length>0&&g.some((e=>!n.isCommentNode(e)&&!n.isWhitespaceNode(e)))&&g.push(new n.TokenNode([i.TokenType.Comma,",",-1,-1,void 0])),e.value=[...g,...y]})));T!==u.value&&(u.cloneBefore({value:T}),null!=e&&e.preserve||u.remove())}});basePlugin.postcss=!0;const postcssPlugin=o=>{const n=Object.assign({enableProgressiveCustomProperties:!0,preserve:!0},o);return n.enableProgressiveCustomProperties&&n.preserve?{postcssPlugin:"postcss-gradients-interpolation-method",plugins:[e(),basePlugin(n)]}:basePlugin(n)};postcssPlugin.postcss=!0,module.exports=postcssPlugin;
