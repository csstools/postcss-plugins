import e from"postcss-selector-parser";const s=s=>{const r=Object.assign({preserve:!1},s);return{postcssPlugin:"postcss-scope-pseudo-class",Rule(s,{result:t}){if(!s.selector.toLowerCase().includes(":scope"))return;{let e=s.parent;for(;e;){if("atrule"===e.type&&"scope"===e.name.toLowerCase())return;e=e.parent}}let o=s.selector;try{const s=e().astSync(o);if(!s)return;s.walkPseudos((e=>{if(":has"===e.value.toLowerCase())return!1;":scope"===e.value.toLowerCase()&&(e.value=":root")})),o=s.toString()}catch(e){s.warn(t,`Unable to parse selector: "${s.selector}"`)}o!==s.selector&&(s.cloneBefore({selector:o}),r.preserve||s.remove())}}};s.postcss=!0;export{s as default};
