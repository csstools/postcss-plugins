import e from"node:fs";const t=["primary","secondary","grey"],s=s=>{const r={},{dist:n}=s;return e.existsSync(n)||e.mkdirSync(n,{recursive:!0}),{postcssPlugin:"postcss-generate-variables-file",Rule(s){const{selector:c}=s,o=c.match(/\[theme-pattern=(\w+)\]/);if(!o||!o[1])return;const i=o[1];r[i]||(r[i]={});const l=r[i];s.walkDecls((s=>{const{prop:r,value:c}=s,o=t.find((e=>new RegExp(`^--cp-color-${e}`).test(r)));if(!o)return;const a=r.split("-"),p=a[a.length-1];isNaN(Number(p))||(l[o]||(l[o]={}),l[o][100*Number(p)]=c,e.writeFileSync(`${n}/${i}.ts`,function(e){const t=JSON.stringify(e,null,"\t");return`export default ${t.replace(/"/g,"'").replace(/'(\d+)'/g,"$1")}`}(l),{encoding:"utf-8"}))}))},OnceExit(){}}};s.postcss=!0;export{s as default};
