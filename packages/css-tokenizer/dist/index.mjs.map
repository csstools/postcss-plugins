{"version":3,"file":"index.mjs","sources":["../src/reader.ts","../src/interfaces/token.ts","../src/stringify.ts","../src/code-points/code-points.ts","../src/checks/four-code-points-would-start-cdo.ts","../src/code-points/ranges.ts","../src/checks/two-code-points-are-valid-escape.ts","../src/checks/three-code-points-would-start-ident-sequence.ts","../src/checks/three-code-points-would-start-number.ts","../src/checks/two-code-points-start-comment.ts","../src/checks/three-code-points-would-start-cdc.ts","../src/consume/comment.ts","../src/consume/escaped-code-point.ts","../src/consume/ident-sequence.ts","../src/consume/hash-token.ts","../src/consume/number.ts","../src/consume/numeric-token.ts","../src/consume/whitespace-token.ts","../src/consume/string-token.ts","../src/checks/matches-url-ident.ts","../src/consume/bad-url.ts","../src/consume/url-token.ts","../src/consume/ident-like-token.ts","../src/tokenizer.ts","../src/util/clone-tokens.ts"],"sourcesContent":["import { CodePointReader } from './interfaces/code-point-reader';\n\nexport class Reader implements CodePointReader {\n\tcursor: number;\n\tsource = '';\n\tcodePointSource: Array<number> = [];\n\tlength = 0;\n\n\trepresentationStart = 0;\n\trepresentationEnd = -1;\n\n\tconstructor(source: string) {\n\t\tthis.cursor = 0;\n\t\tthis.source = source;\n\t\tthis.length = source.length;\n\n\t\tthis.codePointSource = new Array(this.length);\n\t\tfor (let i = 0; i < this.length; i++) {\n\t\t\tthis.codePointSource[i] = this.source.charCodeAt(i);\n\t\t}\n\t}\n\n\tcursorPositionOfLastReadCodePoint(): number {\n\t\treturn this.cursor - 1;\n\t}\n\n\tadvanceCodePoint(n = 1) {\n\t\tthis.cursor += n;\n\t\tthis.representationEnd = this.cursor - 1;\n\t}\n\n\treadCodePoint(n = 1): number | false {\n\t\tconst codePoint = this.codePointSource[this.cursor];\n\t\tif (codePoint === undefined) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.cursor += n;\n\t\tthis.representationEnd = this.cursor - 1;\n\n\t\treturn codePoint;\n\t}\n\n\tunreadCodePoint(n = 1): boolean {\n\t\tif (this.cursor === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.cursor -= n;\n\t\tthis.representationEnd = this.cursor - 1;\n\n\t\treturn true;\n\t}\n\n\trepresentationString(): string {\n\t\treturn this.source.slice(this.representationStart, this.representationEnd + 1);\n\t}\n\n\tresetRepresentation() {\n\t\tthis.representationStart = this.cursor;\n\t\tthis.representationEnd = -1;\n\t}\n\n\tslice(start: number, end: number): string {\n\t\treturn this.source.slice(start, end);\n\t}\n}\n","export enum TokenType {\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#comment-diagram */\n\tComment = 'comment',\n\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-at-keyword-token */\n\tAtKeyword = 'at-keyword-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-bad-string-token */\n\tBadString = 'bad-string-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-bad-url-token */\n\tBadURL = 'bad-url-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-cdc-token */\n\tCDC = 'CDC-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-cdo-token */\n\tCDO = 'CDO-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-colon-token */\n\tColon = 'colon-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-comma-token */\n\tComma = 'comma-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-delim-token */\n\tDelim = 'delim-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-dimension-token */\n\tDimension = 'dimension-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-eof-token */\n\tEOF = 'EOF-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-function-token */\n\tFunction = 'function-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-hash-token */\n\tHash = 'hash-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-ident-token */\n\tIdent = 'ident-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-percentage-token */\n\tNumber = 'number-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-percentage-token */\n\tPercentage = 'percentage-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-semicolon-token */\n\tSemicolon = 'semicolon-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-string-token */\n\tString = 'string-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-url-token */\n\tURL = 'url-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#typedef-whitespace-token */\n\tWhitespace = 'whitespace-token',\n\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#tokendef-open-paren */\n\tOpenParen = '(-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#tokendef-close-paren */\n\tCloseParen = ')-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#tokendef-open-square */\n\tOpenSquare = '[-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#tokendef-close-square */\n\tCloseSquare = ']-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#tokendef-open-curly */\n\tOpenCurly = '{-token',\n\t/** https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#tokendef-close-curly */\n\tCloseCurly = '}-token',\n}\n\nexport enum NumberType {\n\tInteger = 'integer',\n\tNumber = 'number',\n}\n\nexport enum HashType {\n\tUnrestricted = 'unrestricted',\n\tID = 'id',\n}\n\nexport type TokenAtKeyword = Token<TokenType.AtKeyword, { value: string }>;\nexport type TokenBadString = Token<TokenType.BadString, undefined>;\nexport type TokenBadURL = Token<TokenType.BadURL, undefined>;\nexport type TokenCDC = Token<TokenType.CDC, undefined>;\nexport type TokenCDO = Token<TokenType.CDO, undefined>;\nexport type TokenColon = Token<TokenType.Colon, undefined>;\nexport type TokenComma = Token<TokenType.Comma, undefined>;\nexport type TokenComment = Token<TokenType.Comment, undefined>;\nexport type TokenDelim = Token<TokenType.Delim, { value: string }>;\nexport type TokenDimension = Token<TokenType.Dimension, { value: number, unit: string, type: NumberType }>;\nexport type TokenEOF = Token<TokenType.EOF, undefined>;\nexport type TokenFunction = Token<TokenType.Function, { value: string }>;\nexport type TokenHash = Token<TokenType.Hash, { value: string, type: HashType }>;\nexport type TokenIdent = Token<TokenType.Ident, { value: string }>;\nexport type TokenNumber = Token<TokenType.Number, { value: number, type: NumberType }>;\nexport type TokenPercentage = Token<TokenType.Percentage, { value: number }>;\nexport type TokenSemicolon = Token<TokenType.Semicolon, undefined>;\nexport type TokenString = Token<TokenType.String, { value: string }>;\nexport type TokenURL = Token<TokenType.URL, { value: string }>;\nexport type TokenWhitespace = Token<TokenType.Whitespace, undefined>;\n\nexport type TokenOpenParen = Token<TokenType.OpenParen, undefined>;\nexport type TokenCloseParen = Token<TokenType.CloseParen, undefined>;\nexport type TokenOpenSquare = Token<TokenType.OpenSquare, undefined>;\nexport type TokenCloseSquare = Token<TokenType.CloseSquare, undefined>;\nexport type TokenOpenCurly = Token<TokenType.OpenCurly, undefined>;\nexport type TokenCloseCurly = Token<TokenType.CloseCurly, undefined>;\n\nexport type CSSToken = TokenAtKeyword |\n\tTokenBadString |\n\tTokenBadURL |\n\tTokenCDC |\n\tTokenCDO |\n\tTokenColon |\n\tTokenComma |\n\tTokenComment |\n\tTokenDelim |\n\tTokenDimension |\n\tTokenEOF |\n\tTokenFunction |\n\tTokenHash |\n\tTokenIdent |\n\tTokenNumber |\n\tTokenPercentage |\n\tTokenSemicolon |\n\tTokenString |\n\tTokenURL |\n\tTokenWhitespace |\n\tTokenOpenParen |\n\tTokenCloseParen |\n\tTokenOpenSquare |\n\tTokenCloseSquare |\n\tTokenOpenCurly |\n\tTokenCloseCurly;\n\nexport type Token<T extends TokenType, U> = [\n\t/** The type of token */\n\tT,\n\t/** The token representation */\n\tstring,\n\t/** Start position of representation */\n\tnumber,\n\t/** End position of representation */\n\tnumber,\n\t/** Extra data */\n\tU,\n]\n\nexport function mirrorVariantType(type: TokenType): TokenType|null {\n\tswitch (type) {\n\t\tcase TokenType.OpenParen:\n\t\t\treturn TokenType.CloseParen;\n\t\tcase TokenType.CloseParen:\n\t\t\treturn TokenType.OpenParen;\n\n\t\tcase TokenType.OpenCurly:\n\t\t\treturn TokenType.CloseCurly;\n\t\tcase TokenType.CloseCurly:\n\t\t\treturn TokenType.OpenCurly;\n\n\t\tcase TokenType.OpenSquare:\n\t\t\treturn TokenType.CloseSquare;\n\t\tcase TokenType.CloseSquare:\n\t\t\treturn TokenType.OpenSquare;\n\n\t\tdefault:\n\t\t\treturn null;\n\t}\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isToken(x: any): x is CSSToken {\n\tif (!Array.isArray(x)) {\n\t\treturn false;\n\t}\n\n\tif (x.length < 4) {\n\t\treturn false;\n\t}\n\n\tif (!(x[0] in TokenType)) {\n\t\treturn false;\n\t}\n\n\tif (typeof x[1] !== 'string') {\n\t\treturn false;\n\t}\n\n\tif (typeof x[2] !== 'number') {\n\t\treturn false;\n\t}\n\n\tif (typeof x[3] !== 'number') {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n","import type { CSSToken } from './interfaces/token';\n\nexport function stringify(...tokens: Array<CSSToken>): string {\n\tlet buffer = '';\n\tfor (let i = 0; i < tokens.length; i++) {\n\t\tbuffer = buffer + tokens[i][1];\n\t}\n\n\treturn buffer;\n}\n","/** ' */\nexport const APOSTROPHE = '\\u{27}'.charCodeAt(0);\n/** * */\nexport const ASTERISK = '\\u{2a}'.charCodeAt(0);\n/** \\b */\nexport const BACKSPACE = '\\u{8}'.charCodeAt(0);\n/** \\r */\nexport const CARRIAGE_RETURN = '\\u{d}'.charCodeAt(0);\n/** \\t */\nexport const CHARACTER_TABULATION = '\\u{9}'.charCodeAt(0);\n/** : */\nexport const COLON = '\\u{3a}'.charCodeAt(0);\n/** , */\nexport const COMMA = '\\u{2c}'.charCodeAt(0);\n/** @ */\nexport const COMMERCIAL_AT = '\\u{40}'.charCodeAt(0);\n/** \\x7F */\nexport const DELETE = '\\u{7f}'.charCodeAt(0);\n/** ! */\nexport const EXCLAMATION_MARK = '\\u{21}'.charCodeAt(0);\n/** \\f */\nexport const FORM_FEED = '\\u{c}'.charCodeAt(0);\n/** . */\nexport const FULL_STOP = '\\u{2e}'.charCodeAt(0);\n/** > */\nexport const GREATER_THAN_SIGN = '\\u{3e}'.charCodeAt(0);\n/** - */\nexport const HYPHEN_MINUS = '\\u{2d}'.charCodeAt(0);\n/** \\x1F */\nexport const INFORMATION_SEPARATOR_ONE = '\\u{1f}'.charCodeAt(0);\n/** E */\nexport const LATIN_CAPITAL_LETTER_E = '\\u{45}'.charCodeAt(0);\n/** e */\nexport const LATIN_SMALL_LETTER_E = '\\u{65}'.charCodeAt(0);\n/** { */\nexport const LEFT_CURLY_BRACKET = '\\u{7b}'.charCodeAt(0);\n/** ( */\nexport const LEFT_PARENTHESIS = '\\u{28}'.charCodeAt(0);\n/** [ */\nexport const LEFT_SQUARE_BRACKET = '\\u{5b}'.charCodeAt(0);\n/** < */\nexport const LESS_THAN_SIGN = '\\u{3c}'.charCodeAt(0);\n/** \\n */\nexport const LINE_FEED = '\\u{a}'.charCodeAt(0);\n/** \\v */\nexport const LINE_TABULATION = '\\u{b}'.charCodeAt(0);\n/** _ */\nexport const LOW_LINE = '\\u{5f}'.charCodeAt(0);\n/** \\x10FFFF */\nexport const MAXIMUM_ALLOWED_CODEPOINT = '\\u{10FFFF}'.charCodeAt(0);\n/** \\x00 */\nexport const NULL = '\\u{0}'.charCodeAt(0);\n/** # */\nexport const NUMBER_SIGN = '\\u{23}'.charCodeAt(0);\n/** % */\nexport const PERCENTAGE_SIGN = '\\u{25}'.charCodeAt(0);\n/** + */\nexport const PLUS_SIGN = '\\u{2b}'.charCodeAt(0);\n/** \" */\nexport const QUOTATION_MARK = '\\u{22}'.charCodeAt(0);\n/** � */\nexport const REPLACEMENT_CHARACTER = '\\u{0FFFD}'.charCodeAt(0);\n/** \\ */\nexport const REVERSE_SOLIDUS = '\\u{5c}'.charCodeAt(0);\n/** } */\nexport const RIGHT_CURLY_BRACKET = '\\u{7d}'.charCodeAt(0);\n/** ) */\nexport const RIGHT_PARENTHESIS = '\\u{29}'.charCodeAt(0);\n/** ] */\nexport const RIGHT_SQUARE_BRACKET = '\\u{5d}'.charCodeAt(0);\n/** ; */\nexport const SEMICOLON = '\\u{3b}'.charCodeAt(0);\n/** \\u0E */\nexport const SHIFT_OUT = '\\u{e}'.charCodeAt(0);\n/** / */\nexport const SOLIDUS = '\\u{2f}'.charCodeAt(0);\n/** \\u20 */\nexport const SPACE = '\\u{20}'.charCodeAt(0);\n/** 0 */\nexport const DIGIT_0 = '\\u{30}'.charCodeAt(0);\n/** 1 */\nexport const DIGIT_1 = '\\u{31}'.charCodeAt(0);\n/** 2 */\nexport const DIGIT_2 = '\\u{32}'.charCodeAt(0);\n/** 3 */\nexport const DIGIT_3 = '\\u{33}'.charCodeAt(0);\n/** 4 */\nexport const DIGIT_4 = '\\u{34}'.charCodeAt(0);\n/** 5 */\nexport const DIGIT_5 = '\\u{35}'.charCodeAt(0);\n/** 6 */\nexport const DIGIT_6 = '\\u{36}'.charCodeAt(0);\n/** 7 */\nexport const DIGIT_7 = '\\u{37}'.charCodeAt(0);\n/** 8 */\nexport const DIGIT_8 = '\\u{38}'.charCodeAt(0);\n/** 9 */\nexport const DIGIT_9 = '\\u{39}'.charCodeAt(0);\n","import { EXCLAMATION_MARK, HYPHEN_MINUS, LESS_THAN_SIGN } from '../code-points/code-points';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#consume-token\nexport function checkIfFourCodePointsWouldStartCDO(ctx: Context, reader: CodePointReader): boolean {\n\treturn reader.codePointSource[reader.cursor] === LESS_THAN_SIGN && reader.codePointSource[reader.cursor+1] === EXCLAMATION_MARK && reader.codePointSource[reader.cursor + 2] === HYPHEN_MINUS && reader.codePointSource[reader.cursor+3] === HYPHEN_MINUS;\n}\n","import { BACKSPACE, DELETE, INFORMATION_SEPARATOR_ONE, LINE_TABULATION, LOW_LINE, HYPHEN_MINUS, NULL, SHIFT_OUT, LINE_FEED, CARRIAGE_RETURN, FORM_FEED, CHARACTER_TABULATION, SPACE } from './code-points';\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#tokenizer-definitions\n\nconst digitsLow = '\\u{30}'.charCodeAt(0);\nconst digitsHigh = '\\u{39}'.charCodeAt(0);\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#digit\nexport function isDigitCodePoint(search: number): boolean {\n\treturn digitsLow <= search && search <= digitsHigh;\n}\n\nconst letterUppercaseLow = '\\u{41}'.charCodeAt(0);\nconst letterUppercaseHigh = '\\u{5a}'.charCodeAt(0);\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#uppercase-letter\nexport function isUppercaseLetterCodePoint(search: number): boolean {\n\treturn letterUppercaseLow <= search && search <= letterUppercaseHigh;\n}\n\nconst letterLowercaseLow = '\\u{61}'.charCodeAt(0);\nconst letterLowercaseHigh = '\\u{7a}'.charCodeAt(0);\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#lowercase-letter\nexport function isLowercaseLetterCodePoint(search: number): boolean {\n\treturn letterLowercaseLow <= search && search <= letterLowercaseHigh;\n}\n\nconst afUppercaseHigh = '\\u{46}'.charCodeAt(0);\nconst afLowercaseHigh = '\\u{66}'.charCodeAt(0);\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#hex-digit\nexport function isHexDigitCodePoint(search: number): boolean {\n\tif (digitsLow <= search && search <= digitsHigh) {\n\t\treturn true;\n\t}\n\n\tif (letterLowercaseLow <= search && search <= afLowercaseHigh) {\n\t\treturn true;\n\t}\n\n\tif (letterUppercaseLow <= search && search <= afUppercaseHigh) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#letter\nexport function isLetterCodePoint(search: number): boolean {\n\treturn isLowercaseLetterCodePoint(search) || isUppercaseLetterCodePoint(search);\n}\n\nconst nonASCIILow = '\\u{80}'.charCodeAt(0);\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#non-ascii-code-point\nexport function isNonASCIICodePoint(search: number): boolean {\n\treturn search >= nonASCIILow;\n}\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#ident-start-code-point\nexport function isIdentStartCodePoint(search: number): boolean {\n\tif (isLetterCodePoint(search)) {\n\t\treturn true;\n\t}\n\n\tif (isNonASCIICodePoint(search)) {\n\t\treturn true;\n\t}\n\n\treturn search === LOW_LINE;\n}\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#ident-code-point\nexport function isIdentCodePoint(search: number): boolean {\n\tif (isIdentStartCodePoint(search)) {\n\t\treturn true;\n\t}\n\n\tif (isDigitCodePoint(search)) {\n\t\treturn true;\n\t}\n\n\treturn search === HYPHEN_MINUS;\n}\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#non-printable-code-point\nexport function isNonPrintableCodePoint(search: number): boolean {\n\tif (search === LINE_TABULATION) {\n\t\treturn true;\n\t}\n\n\tif (search === DELETE) {\n\t\treturn true;\n\t}\n\n\tif (NULL <= search && search <= BACKSPACE) {\n\t\treturn true;\n\t}\n\n\treturn SHIFT_OUT <= search && search <= INFORMATION_SEPARATOR_ONE;\n}\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#whitespace\nexport function isNewLine(search: number): boolean {\n\tswitch (search) {\n\t\tcase LINE_FEED:\n\t\tcase CARRIAGE_RETURN:\n\t\tcase FORM_FEED:\n\t\t\t// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#input-preprocessing\n\t\t\t// We can not follow the preprocessing rules because our output is text and must be minimally different from the input.\n\t\t\t// Applying the preprocessing rules would make it impossible to match the input.\n\t\t\t// A side effect of this is that our definition of whitespace is broader.\n\t\t\treturn true;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n}\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#whitespace\nexport function isWhitespace(search: number): boolean {\n\t// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#input-preprocessing\n\t// We can not follow the preprocessing rules because our output is text and must be minimally different from the input.\n\t// Applying the preprocessing rules would make it impossible to match the input.\n\t// A side effect of this is that our definition of whitespace is broader.\n\n\tswitch (search) {\n\t\tcase LINE_FEED:\n\t\tcase CARRIAGE_RETURN:\n\t\tcase FORM_FEED:\n\t\tcase CHARACTER_TABULATION:\n\t\tcase SPACE:\n\t\t\treturn true;\n\n\t\tdefault:\n\t\t\treturn false;\n\t}\n}\n\nconst surrogateLow = '\\u{d800}'.charCodeAt(0);\nconst surrogateHigh = '\\u{dfff}'.charCodeAt(0);\n\n// https://infra.spec.whatwg.org/#surrogate\nexport function isSurrogate(search: number): boolean {\n\treturn surrogateLow <= search && search <= surrogateHigh;\n}\n","import { LINE_FEED, REVERSE_SOLIDUS } from '../code-points/code-points';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#starts-with-a-valid-escape\nexport function checkIfTwoCodePointsAreAValidEscape(ctx: Context, reader: CodePointReader): boolean {\n\t// If the first code point is not U+005C REVERSE SOLIDUS (\\), return false.\n\tif (reader.codePointSource[reader.cursor] !== REVERSE_SOLIDUS) { // \"\\\"\n\t\treturn false;\n\t}\n\n\t// Otherwise, if the second code point is a newline, return false.\n\tif (reader.codePointSource[reader.cursor+1] === LINE_FEED) {\n\t\treturn false;\n\t}\n\n\t// Otherwise, return true.\n\treturn true;\n}\n","import { HYPHEN_MINUS, LINE_FEED, REVERSE_SOLIDUS } from '../code-points/code-points';\nimport { isIdentStartCodePoint } from '../code-points/ranges';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\nimport { checkIfTwoCodePointsAreAValidEscape } from './two-code-points-are-valid-escape';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#would-start-an-identifier\nexport function checkIfThreeCodePointsWouldStartAnIdentSequence(ctx: Context, reader: CodePointReader): boolean {\n\t// // U+002D HYPHEN-MINUS\n\tif (reader.codePointSource[reader.cursor] === HYPHEN_MINUS) {\n\t\t// If the second code point is a U+002D HYPHEN-MINUS return true\n\t\tif (reader.codePointSource[reader.cursor+1] === HYPHEN_MINUS) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// If the second code point is an ident-start code point return true\n\t\tif (isIdentStartCodePoint(reader.codePointSource[reader.cursor+1])) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// If the second and third code points are a valid escape return true\n\t\tif (reader.codePointSource[reader.cursor+1] === REVERSE_SOLIDUS && reader.codePointSource[reader.cursor + 2] !== LINE_FEED) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t// ident-start code point\n\t// Return true.\n\tif (isIdentStartCodePoint(reader.codePointSource[reader.cursor])) {\n\t\treturn true;\n\t}\n\n\t// U+005C REVERSE SOLIDUS (\\)\n\treturn checkIfTwoCodePointsAreAValidEscape(ctx, reader);\n}\n","import { FULL_STOP, HYPHEN_MINUS, PLUS_SIGN } from '../code-points/code-points';\nimport { isDigitCodePoint } from '../code-points/ranges';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#starts-with-a-number\nexport function checkIfThreeCodePointsWouldStartANumber(ctx: Context, reader: CodePointReader): boolean {\n\tif (reader.codePointSource[reader.cursor] === PLUS_SIGN || reader.codePointSource[reader.cursor] === HYPHEN_MINUS) { // U+002B PLUS SIGN (+) or U+002D HYPHEN-MINUS (-)\n\t\t// If the second code point is a digit, return true.\n\t\tif (isDigitCodePoint(reader.codePointSource[reader.cursor+1])) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Otherwise, if the second code point is a U+002E FULL STOP (.)\n\t\tif (reader.codePointSource[reader.cursor+1] === FULL_STOP) {\n\t\t\t// and the third code point is a digit, return true.\n\t\t\treturn isDigitCodePoint(reader.codePointSource[reader.cursor+2]);\n\t\t}\n\n\t\t// Otherwise, return false.\n\t\treturn false;\n\n\t} else if (reader.codePointSource[reader.cursor] === FULL_STOP) { // U+002E FULL STOP (.)\n\t\t// If the second code point is a digit, return true.\n\t\t// Otherwise, return false.\n\t\treturn isDigitCodePoint(reader.codePointSource[reader.cursor+1]);\n\n\t} else if (isDigitCodePoint(reader.codePointSource[reader.cursor])) { // digit\n\t\t// Return true.\n\t\treturn true;\n\t}\n\n\t// anything else\n\t// Return false.\n\treturn false;\n}\n","import { ASTERISK, SOLIDUS } from '../code-points/code-points';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#consume-comments\nexport function checkIfTwoCodePointsStartAComment(ctx: Context, reader: CodePointReader): boolean {\n\tif (reader.codePointSource[reader.cursor] !== SOLIDUS) {\n\t\treturn false;\n\t}\n\n\tif (reader.codePointSource[reader.cursor+1] !== ASTERISK) {\n\t\treturn false;\n\t}\n\n\t// Otherwise, return true.\n\treturn true;\n}\n","import { GREATER_THAN_SIGN, HYPHEN_MINUS } from '../code-points/code-points';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#consume-token\nexport function checkIfThreeCodePointsWouldStartCDC(ctx: Context, reader: CodePointReader): boolean {\n\treturn reader.codePointSource[reader.cursor] === HYPHEN_MINUS && reader.codePointSource[reader.cursor+1] === HYPHEN_MINUS && reader.codePointSource[reader.cursor + 2] === GREATER_THAN_SIGN;\n}\n","import { ASTERISK, SOLIDUS } from '../code-points/code-points';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\nimport { TokenComment, TokenType } from '../interfaces/token';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#consume-comment\nexport function consumeComment(ctx: Context, reader: CodePointReader): TokenComment {\n\treader.advanceCodePoint(2);\n\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tconst codePoint = reader.readCodePoint();\n\t\tif (codePoint === false) {\n\t\t\tctx.onParseError({\n\t\t\t\tmessage: 'Unexpected EOF while consuming a comment.',\n\t\t\t\tstart: reader.representationStart,\n\t\t\t\tend: reader.representationEnd,\n\t\t\t\tstate: [\n\t\t\t\t\t'4.3.2. Consume comments',\n\t\t\t\t\t'Unexpected EOF',\n\t\t\t\t],\n\t\t\t});\n\n\t\t\tbreak;\n\t\t}\n\n\t\tif (codePoint !== ASTERISK) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (reader.codePointSource[reader.cursor] === undefined) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (reader.codePointSource[reader.cursor] === SOLIDUS) {\n\t\t\treader.advanceCodePoint();\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn [\n\t\tTokenType.Comment,\n\t\treader.representationString(),\n\t\treader.representationStart,\n\t\treader.representationEnd,\n\t\tundefined,\n\t];\n}\n","import { MAXIMUM_ALLOWED_CODEPOINT, REPLACEMENT_CHARACTER } from '../code-points/code-points';\nimport { isHexDigitCodePoint, isSurrogate, isWhitespace } from '../code-points/ranges';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#consume-escaped-code-point\nexport function consumeEscapedCodePoint(ctx: Context, reader: CodePointReader): number {\n\tconst codePoint = reader.readCodePoint();\n\tif (codePoint === false) {\n\t\tctx.onParseError({\n\t\t\tmessage: 'Unexpected EOF while consuming an escaped code point.',\n\t\t\tstart: reader.representationStart,\n\t\t\tend: reader.representationEnd,\n\t\t\tstate: [\n\t\t\t\t'4.3.7. Consume an escaped code point',\n\t\t\t\t'Unexpected EOF',\n\t\t\t],\n\t\t});\n\n\t\treturn REPLACEMENT_CHARACTER;\n\t}\n\n\tif (isHexDigitCodePoint(codePoint)) {\n\t\tconst hexSequence: Array<number> = [codePoint];\n\n\t\twhile ((reader.codePointSource[reader.cursor] !== undefined) && isHexDigitCodePoint(reader.codePointSource[reader.cursor]) && hexSequence.length < 6) {\n\t\t\thexSequence.push(reader.codePointSource[reader.cursor]);\n\t\t\treader.advanceCodePoint();\n\t\t}\n\n\t\tif (isWhitespace(reader.codePointSource[reader.cursor])) {\n\t\t\treader.advanceCodePoint();\n\t\t}\n\n\t\tconst codePointLiteral = parseInt(String.fromCharCode(...hexSequence), 16);\n\t\tif (codePointLiteral === 0) {\n\t\t\treturn REPLACEMENT_CHARACTER;\n\t\t}\n\t\tif (isSurrogate(codePointLiteral)) {\n\t\t\treturn REPLACEMENT_CHARACTER;\n\t\t}\n\t\tif (codePointLiteral > MAXIMUM_ALLOWED_CODEPOINT) {\n\t\t\treturn REPLACEMENT_CHARACTER;\n\t\t}\n\n\t\treturn codePointLiteral;\n\t}\n\n\treturn codePoint;\n}\n","import { checkIfTwoCodePointsAreAValidEscape } from '../checks/two-code-points-are-valid-escape';\nimport { isIdentCodePoint } from '../code-points/ranges';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\nimport { consumeEscapedCodePoint } from './escaped-code-point';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#consume-name\nexport function consumeIdentSequence(ctx: Context, reader: CodePointReader): Array<number> {\n\tconst result: Array<number> = [];\n\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tif (isIdentCodePoint(reader.codePointSource[reader.cursor])) {\n\t\t\tresult.push(reader.codePointSource[reader.cursor]);\n\t\t\treader.advanceCodePoint();\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (checkIfTwoCodePointsAreAValidEscape(ctx, reader)) {\n\t\t\treader.advanceCodePoint();\n\t\t\tresult.push(consumeEscapedCodePoint(ctx, reader));\n\t\t\tcontinue;\n\t\t}\n\n\t\treturn result;\n\t}\n}\n","import { checkIfThreeCodePointsWouldStartAnIdentSequence } from '../checks/three-code-points-would-start-ident-sequence';\nimport { checkIfTwoCodePointsAreAValidEscape } from '../checks/two-code-points-are-valid-escape';\nimport { isIdentCodePoint } from '../code-points/ranges';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\nimport { HashType, TokenDelim, TokenHash, TokenType } from '../interfaces/token';\nimport { consumeIdentSequence } from './ident-sequence';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#consume-token\nexport function consumeHashToken(ctx: Context, reader: CodePointReader): TokenDelim|TokenHash {\n\treader.advanceCodePoint();\n\n\tif (\n\t\t(reader.codePointSource[reader.cursor] !== undefined) &&\n\t\tisIdentCodePoint(reader.codePointSource[reader.cursor]) ||\n\t\tcheckIfTwoCodePointsAreAValidEscape(ctx, reader)\n\t) {\n\t\tlet hashType = HashType.Unrestricted;\n\n\t\tif (checkIfThreeCodePointsWouldStartAnIdentSequence(ctx, reader)) {\n\t\t\thashType = HashType.ID;\n\t\t}\n\n\t\tconst identSequence = consumeIdentSequence(ctx, reader);\n\t\treturn [\n\t\t\tTokenType.Hash,\n\t\t\treader.representationString(),\n\t\t\treader.representationStart,\n\t\t\treader.representationEnd,\n\t\t\t{\n\t\t\t\tvalue: String.fromCharCode(...identSequence),\n\t\t\t\ttype: hashType,\n\t\t\t},\n\t\t];\n\t}\n\n\treturn [\n\t\tTokenType.Delim,\n\t\treader.representationString(),\n\t\treader.representationStart,\n\t\treader.representationEnd,\n\t\t{\n\t\t\tvalue: '#',\n\t\t},\n\t];\n}\n","import { FULL_STOP, HYPHEN_MINUS, LATIN_CAPITAL_LETTER_E, LATIN_SMALL_LETTER_E, PLUS_SIGN } from '../code-points/code-points';\nimport { isDigitCodePoint } from '../code-points/ranges';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\nimport { NumberType } from '../interfaces/token';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#consume-number\nexport function consumeNumber(ctx: Context, reader: CodePointReader): [number, NumberType] {\n\t// 1. Initially set type to \"integer\".\n\t// Let repr be the empty string.\n\tlet type = NumberType.Integer;\n\tconst repr: Array<number> = [];\n\n\t{\n\t\t// 2. If the next input code point is U+002B PLUS SIGN (+) or U+002D HYPHEN-MINUS (-), consume it and append it to repr.\n\t\tif (reader.codePointSource[reader.cursor] === PLUS_SIGN || reader.codePointSource[reader.cursor] === HYPHEN_MINUS) {\n\t\t\trepr.push(reader.codePointSource[reader.cursor]);\n\t\t\treader.advanceCodePoint();\n\t\t}\n\n\t\t// 3. While the next input code point is a digit, consume it and append it to repr.\n\t\tconst newPart = consumeDigits(reader);\n\t\tfor (let i = 0; i < newPart.length; i++) {\n\t\t\trepr.push(newPart[i]);\n\t\t}\n\t}\n\n\t{\n\t\t// 4. If the next 2 input code points are U+002E FULL STOP (.) followed by a digit, then:\n\t\tif (reader.codePointSource[reader.cursor] === FULL_STOP && isDigitCodePoint(reader.codePointSource[reader.cursor+1])) {\n\t\t\t// 4.2. Append them to repr.\n\t\t\trepr.push(reader.codePointSource[reader.cursor]);\n\t\t\trepr.push(reader.codePointSource[reader.cursor+1]);\n\n\t\t\t// 4.1. Consume them.\n\t\t\treader.advanceCodePoint(2);\n\n\t\t\t// 4.3. Set type to \"number\".\n\t\t\ttype = NumberType.Number;\n\n\t\t\t// 4.4. While the next input code point is a digit, consume it and append it to repr.\n\t\t\tconst newPart = consumeDigits(reader);\n\t\t\tfor (let i = 0; i < newPart.length; i++) {\n\t\t\t\trepr.push(newPart[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\t{\n\t\t// 5. If the next 2 or 3 input code points are U+0045 LATIN CAPITAL LETTER E (E) or U+0065 LATIN SMALL LETTER E (e),\n\t\t// optionally followed by U+002D HYPHEN-MINUS (-) or U+002B PLUS SIGN (+),\n\t\t// followed by a digit, then:\n\t\tif (\n\t\t\t(reader.codePointSource[reader.cursor] === LATIN_SMALL_LETTER_E || reader.codePointSource[reader.cursor] === LATIN_CAPITAL_LETTER_E) &&\n\t\t\tisDigitCodePoint(reader.codePointSource[reader.cursor+1])\n\t\t) {\n\t\t\t// 5.2. Append them to repr.\n\t\t\trepr.push(reader.codePointSource[reader.cursor]);\n\t\t\trepr.push(reader.codePointSource[reader.cursor+1]);\n\n\t\t\t// 5.1. Consume them.\n\t\t\treader.advanceCodePoint(2);\n\n\t\t\t// 5.3. Set type to \"number\".\n\t\t\ttype = NumberType.Number;\n\n\t\t\t// 5.4. While the next input code point is a digit, consume it and append it to repr.\n\t\t\tconst newPart = consumeDigits(reader);\n\t\t\tfor (let i = 0; i < newPart.length; i++) {\n\t\t\t\trepr.push(newPart[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\t(reader.codePointSource[reader.cursor] === LATIN_SMALL_LETTER_E || reader.codePointSource[reader.cursor] === LATIN_CAPITAL_LETTER_E) &&\n\t\t\t(\n\t\t\t\t(reader.codePointSource[reader.cursor+1] === HYPHEN_MINUS || reader.codePointSource[reader.cursor+1] === PLUS_SIGN) &&\n\t\t\t\tisDigitCodePoint(reader.codePointSource[reader.cursor+2])\n\t\t\t)\n\t\t) {\n\t\t\t// 5.2. Append them to repr.\n\t\t\trepr.push(reader.codePointSource[reader.cursor]);\n\t\t\trepr.push(reader.codePointSource[reader.cursor+1]);\n\t\t\trepr.push(reader.codePointSource[reader.cursor+2]);\n\n\t\t\t// 5.1. Consume them.\n\t\t\treader.advanceCodePoint(3);\n\n\t\t\t// 5.3. Set type to \"number\".\n\t\t\ttype = NumberType.Number;\n\n\t\t\t// 5.4. While the next input code point is a digit, consume it and append it to repr.\n\t\t\tconst newPart = consumeDigits(reader);\n\t\t\tfor (let i = 0; i < newPart.length; i++) {\n\t\t\t\trepr.push(newPart[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\t// 6. Convert repr to a number, and set the value to the returned value.\n\tconst value = convertCodePointsToNumber(repr);\n\n\t// 7. Return value and type.\n\treturn [value, type];\n}\n\nfunction consumeDigits(reader: CodePointReader): Array<number> {\n\tconst value: Array<number> = [];\n\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tif (reader.codePointSource[reader.cursor] === undefined) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (isDigitCodePoint(reader.codePointSource[reader.cursor])) {\n\t\t\tvalue.push(reader.codePointSource[reader.cursor]);\n\t\t\treader.advanceCodePoint();\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t}\n}\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#convert-string-to-number\nfunction convertCodePointsToNumber(codePoints: Array<number>): number {\n\tlet s = 1;\n\tconst iCodePoints: Array<number> = [];\n\tlet i = 0;\n\n\tlet d = 0;\n\tconst fCodePoints: Array<number> = [];\n\tlet f = 0;\n\n\tlet t = 1;\n\n\tconst eCodePoints: Array<number> = [];\n\tlet e = 0;\n\n\tlet cursor = 0;\n\n\t// 1. A sign: a single U+002B PLUS SIGN (+) or U+002D HYPHEN-MINUS (-), or the empty string.\n\t// Let s be the number -1 if the sign is U+002D HYPHEN-MINUS (-);\n\t// otherwise, let s be the number 1.\n\tif (codePoints[cursor] === HYPHEN_MINUS) {\n\t\tcursor++;\n\t\ts = -1;\n\t} else if (codePoints[cursor] === PLUS_SIGN) {\n\t\tcursor++;\n\t}\n\n\t// 2. An integer part: zero or more digits.\n\t// If there is at least one digit,\n\t// let i be the number formed by interpreting the digits as a base-10 integer;\n\t// otherwise, let i be the number 0.\n\twhile (cursor < codePoints.length && isDigitCodePoint(codePoints[cursor])) {\n\t\tiCodePoints.push(codePoints[cursor]);\n\t\tcursor++;\n\t}\n\n\ti = digitCodePointsToInteger(iCodePoints);\n\n\t// 3. A decimal point: a single U+002E FULL STOP (.), or the empty string.\n\tif (codePoints[cursor] === FULL_STOP) {\n\t\tcursor++;\n\t}\n\n\t// 4. A fractional part: zero or more digits.\n\t// If there is at least one digit,\n\t// let f be the number formed by interpreting the digits as a base-10 integer and d be the number of digits;\n\t// otherwise, let f and d be the number 0.\n\twhile (cursor < codePoints.length && isDigitCodePoint(codePoints[cursor])) {\n\t\tfCodePoints.push(codePoints[cursor]);\n\t\tcursor++;\n\t}\n\n\td = fCodePoints.length;\n\tf = (digitCodePointsToInteger(fCodePoints) / Math.pow(10, d));\n\n\t// 5. An exponent indicator: a single U+0045 LATIN CAPITAL LETTER E (E) or U+0065 LATIN SMALL LETTER E (e), or the empty string.\n\tif (codePoints[cursor] === LATIN_SMALL_LETTER_E || codePoints[cursor] === LATIN_CAPITAL_LETTER_E) {\n\t\tcursor++;\n\t}\n\n\t// 6. An exponent sign: a single U+002B PLUS SIGN (+) or U+002D HYPHEN-MINUS (-), or the empty string.\n\t// Let t be the number -1 if the sign is U+002D HYPHEN-MINUS (-);\n\t// otherwise, let t be the number 1.\n\tif (codePoints[cursor] === HYPHEN_MINUS) {\n\t\tcursor++;\n\t\tt = -1;\n\t} else if (codePoints[cursor] === PLUS_SIGN) {\n\t\tcursor++;\n\t}\n\n\t// 7. An exponent: zero or more digits.\n\t// If there is at least one digit,\n\t// let e be the number formed by interpreting the digits as a base-10 integer;\n\t// otherwise, let e be the number 0.\n\twhile (cursor < codePoints.length && isDigitCodePoint(codePoints[cursor])) {\n\t\teCodePoints.push(codePoints[cursor]);\n\t\tcursor++;\n\t}\n\n\te = digitCodePointsToInteger(eCodePoints);\n\n\t// Return the number s·(i + f·10-d)·10te.\n\treturn s * (i + f) * Math.pow(10, t * e);\n}\n\nfunction digitCodePointsToInteger(codePoints: Array<number>): number {\n\tif (codePoints.length === 0) {\n\t\treturn 0;\n\t}\n\n\treturn Number.parseInt(String.fromCharCode(...codePoints), 10);\n}\n","import { checkIfThreeCodePointsWouldStartAnIdentSequence } from '../checks/three-code-points-would-start-ident-sequence';\nimport { PERCENTAGE_SIGN } from '../code-points/code-points';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\nimport { TokenDimension, TokenNumber, TokenPercentage, TokenType } from '../interfaces/token';\nimport { consumeIdentSequence } from './ident-sequence';\nimport { consumeNumber } from './number';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#consume-numeric-token\nexport function consumeNumericToken(ctx: Context, reader: CodePointReader): TokenPercentage|TokenNumber|TokenDimension {\n\tconst numberValue = consumeNumber(ctx, reader);\n\n\tif (checkIfThreeCodePointsWouldStartAnIdentSequence(ctx, reader)) {\n\t\tconst unit = consumeIdentSequence(ctx, reader);\n\n\t\treturn [\n\t\t\tTokenType.Dimension,\n\t\t\treader.representationString(),\n\t\t\treader.representationStart,\n\t\t\treader.representationEnd,\n\t\t\t{\n\t\t\t\tvalue: numberValue[0],\n\t\t\t\ttype: numberValue[1],\n\t\t\t\tunit: String.fromCharCode(...unit),\n\t\t\t},\n\t\t];\n\t}\n\n\t{\n\t\tif (reader.codePointSource[reader.cursor] === PERCENTAGE_SIGN) {\n\t\t\treader.advanceCodePoint();\n\n\t\t\treturn [\n\t\t\t\tTokenType.Percentage,\n\t\t\t\treader.representationString(),\n\t\t\t\treader.representationStart,\n\t\t\t\treader.representationEnd,\n\t\t\t\t{\n\t\t\t\t\tvalue: numberValue[0],\n\t\t\t\t},\n\t\t\t];\n\t\t}\n\t}\n\n\treturn [\n\t\tTokenType.Number,\n\t\treader.representationString(),\n\t\treader.representationStart,\n\t\treader.representationEnd,\n\t\t{\n\t\t\tvalue: numberValue[0],\n\t\t\ttype: numberValue[1],\n\t\t},\n\t];\n}\n","import { isWhitespace } from '../code-points/ranges';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\nimport { TokenType, TokenWhitespace } from '../interfaces/token';\n\nexport function consumeWhiteSpace(ctx: Context, reader: CodePointReader): TokenWhitespace {\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tif (!isWhitespace(reader.codePointSource[reader.cursor])) {\n\t\t\tbreak;\n\t\t}\n\n\t\treader.advanceCodePoint();\n\t}\n\n\treturn [\n\t\tTokenType.Whitespace,\n\t\treader.representationString(),\n\t\treader.representationStart,\n\t\treader.representationEnd,\n\t\tundefined,\n\t];\n}\n","import { REVERSE_SOLIDUS } from '../code-points/code-points';\nimport { isNewLine } from '../code-points/ranges';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\nimport { TokenBadString, TokenString, TokenType } from '../interfaces/token';\nimport { consumeEscapedCodePoint } from './escaped-code-point';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#consume-string-token\nexport function consumeStringToken(ctx: Context, reader: CodePointReader): TokenBadString|TokenString {\n\tlet result = '';\n\n\tconst first = reader.readCodePoint();\n\tif (first === false) {\n\t\tthrow new Error('Unexpected EOF');\n\t}\n\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tconst next = reader.readCodePoint();\n\t\tif (next === false) {\n\t\t\tctx.onParseError({\n\t\t\t\tmessage: 'Unexpected EOF while consuming a string token.',\n\t\t\t\tstart: reader.representationStart,\n\t\t\t\tend: reader.representationEnd,\n\t\t\t\tstate: [\n\t\t\t\t\t'4.3.5. Consume a string token',\n\t\t\t\t\t'Unexpected EOF',\n\t\t\t\t],\n\t\t\t});\n\n\t\t\treturn [TokenType.String, reader.representationString(), reader.representationStart, reader.representationEnd, { value: result }];\n\t\t}\n\n\t\tif (isNewLine(next)) {\n\t\t\t{\n\t\t\t\tctx.onParseError({\n\t\t\t\t\tmessage: 'Unexpected newline while consuming a string token.',\n\t\t\t\t\tstart: reader.representationStart,\n\t\t\t\t\tend: reader.representationEnd,\n\t\t\t\t\tstate: [\n\t\t\t\t\t\t'4.3.5. Consume a string token',\n\t\t\t\t\t\t'Unexpected newline',\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treader.unreadCodePoint();\n\t\t\treturn [TokenType.BadString, reader.representationString(), reader.representationStart, reader.representationEnd, undefined];\n\t\t}\n\n\t\tif (next === first) {\n\t\t\treturn [TokenType.String, reader.representationString(), reader.representationStart, reader.representationEnd, { value: result }];\n\t\t}\n\n\t\tif (next === REVERSE_SOLIDUS) {\n\t\t\tif (reader.codePointSource[reader.cursor] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (isNewLine(reader.codePointSource[reader.cursor])) {\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tresult += String.fromCharCode(consumeEscapedCodePoint(ctx, reader));\n\t\t\tcontinue;\n\t\t}\n\n\t\tresult += String.fromCharCode(next);\n\t}\n}\n","import { Context } from '../interfaces/context';\n\nconst u = 'u'.charCodeAt(0);\nconst U = 'U'.charCodeAt(0);\nconst r = 'r'.charCodeAt(0);\nconst R = 'R'.charCodeAt(0);\nconst l = 'l'.charCodeAt(0);\nconst L = 'L'.charCodeAt(0);\n\nexport function checkIfCodePointsMatchURLIdent(ctx: Context, codePoints: Array<number>): boolean {\n\tif (codePoints.length !== 3) {\n\t\treturn false;\n\t}\n\n\tif (codePoints[0] !== u && codePoints[0] !== U) {\n\t\treturn false;\n\t}\n\n\tif (codePoints[1] !== r && codePoints[1] !== R) {\n\t\treturn false;\n\t}\n\n\tif (codePoints[2] !== l && codePoints[2] !== L) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n","import { checkIfTwoCodePointsAreAValidEscape } from '../checks/two-code-points-are-valid-escape';\nimport { RIGHT_PARENTHESIS } from '../code-points/code-points';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\nimport { consumeEscapedCodePoint } from './escaped-code-point';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#consume-remnants-of-bad-url\nexport function consumeBadURL(ctx: Context, reader: CodePointReader) {\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tif (reader.codePointSource[reader.cursor] === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (reader.codePointSource[reader.cursor] === RIGHT_PARENTHESIS) {\n\t\t\treader.advanceCodePoint();\n\t\t\treturn;\n\t\t}\n\n\t\tif (checkIfTwoCodePointsAreAValidEscape(ctx, reader)) {\n\t\t\treader.advanceCodePoint();\n\t\t\tconsumeEscapedCodePoint(ctx, reader);\n\t\t\tcontinue;\n\t\t}\n\n\t\treader.advanceCodePoint();\n\t\tcontinue;\n\t}\n}\n","import { checkIfTwoCodePointsAreAValidEscape } from '../checks/two-code-points-are-valid-escape';\nimport { APOSTROPHE, LEFT_PARENTHESIS, QUOTATION_MARK, REVERSE_SOLIDUS, RIGHT_PARENTHESIS } from '../code-points/code-points';\nimport { isNonPrintableCodePoint, isWhitespace } from '../code-points/ranges';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\nimport { TokenBadURL, TokenType, TokenURL } from '../interfaces/token';\nimport { consumeBadURL } from './bad-url';\nimport { consumeEscapedCodePoint } from './escaped-code-point';\nimport { consumeWhiteSpace } from './whitespace-token';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#consume-url-token\nexport function consumeUrlToken(ctx: Context, reader: CodePointReader): TokenURL|TokenBadURL {\n\tconsumeWhiteSpace(ctx, reader);\n\tlet string = '';\n\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tif (reader.codePointSource[reader.cursor] === undefined) {\n\t\t\tctx.onParseError({\n\t\t\t\tmessage: 'Unexpected EOF while consuming a url token.',\n\t\t\t\tstart: reader.representationStart,\n\t\t\t\tend: reader.representationEnd,\n\t\t\t\tstate: [\n\t\t\t\t\t'4.3.6. Consume a url token',\n\t\t\t\t\t'Unexpected EOF',\n\t\t\t\t],\n\t\t\t});\n\n\t\t\treturn [\n\t\t\t\tTokenType.URL,\n\t\t\t\treader.representationString(),\n\t\t\t\treader.representationStart,\n\t\t\t\treader.representationEnd,\n\t\t\t\t{\n\t\t\t\t\tvalue: string,\n\t\t\t\t},\n\t\t\t];\n\t\t}\n\n\t\tif (reader.codePointSource[reader.cursor] === RIGHT_PARENTHESIS) {\n\t\t\treader.advanceCodePoint();\n\t\t\treturn [\n\t\t\t\tTokenType.URL,\n\t\t\t\treader.representationString(),\n\t\t\t\treader.representationStart,\n\t\t\t\treader.representationEnd,\n\t\t\t\t{\n\t\t\t\t\tvalue: string,\n\t\t\t\t},\n\t\t\t];\n\t\t}\n\n\t\tif (isWhitespace(reader.codePointSource[reader.cursor])) {\n\t\t\tconsumeWhiteSpace(ctx, reader);\n\t\t\tif (reader.codePointSource[reader.cursor] === undefined) {\n\t\t\t\tctx.onParseError({\n\t\t\t\t\tmessage: 'Unexpected EOF while consuming a url token.',\n\t\t\t\t\tstart: reader.representationStart,\n\t\t\t\t\tend: reader.representationEnd,\n\t\t\t\t\tstate: [\n\t\t\t\t\t\t'4.3.6. Consume a url token',\n\t\t\t\t\t\t'Consume as much whitespace as possible',\n\t\t\t\t\t\t'Unexpected EOF',\n\t\t\t\t\t],\n\t\t\t\t});\n\n\t\t\t\treturn [\n\t\t\t\t\tTokenType.URL,\n\t\t\t\t\treader.representationString(),\n\t\t\t\t\treader.representationStart,\n\t\t\t\t\treader.representationEnd,\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: string,\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tif (reader.codePointSource[reader.cursor] === RIGHT_PARENTHESIS) {\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\treturn [\n\t\t\t\t\tTokenType.URL,\n\t\t\t\t\treader.representationString(),\n\t\t\t\t\treader.representationStart,\n\t\t\t\t\treader.representationEnd,\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: string,\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tconsumeBadURL(ctx, reader);\n\t\t\treturn [\n\t\t\t\tTokenType.BadURL,\n\t\t\t\treader.representationString(),\n\t\t\t\treader.representationStart,\n\t\t\t\treader.representationEnd,\n\t\t\t\tundefined,\n\t\t\t];\n\t\t}\n\n\t\tif (reader.codePointSource[reader.cursor] === QUOTATION_MARK || reader.codePointSource[reader.cursor] === APOSTROPHE || reader.codePointSource[reader.cursor] === LEFT_PARENTHESIS || isNonPrintableCodePoint(reader.codePointSource[reader.cursor])) {\n\t\t\tconsumeBadURL(ctx, reader);\n\n\t\t\tctx.onParseError({\n\t\t\t\tmessage: 'Unexpected character while consuming a url token.',\n\t\t\t\tstart: reader.representationStart,\n\t\t\t\tend: reader.representationEnd,\n\t\t\t\tstate: [\n\t\t\t\t\t'4.3.6. Consume a url token',\n\t\t\t\t\t'Unexpected U+0022 QUOTATION MARK (\"), U+0027 APOSTROPHE (\\'), U+0028 LEFT PARENTHESIS (() or non-printable code point',\n\t\t\t\t],\n\t\t\t});\n\n\t\t\treturn [\n\t\t\t\tTokenType.BadURL,\n\t\t\t\treader.representationString(),\n\t\t\t\treader.representationStart,\n\t\t\t\treader.representationEnd,\n\t\t\t\tundefined,\n\t\t\t];\n\t\t}\n\n\t\tif (reader.codePointSource[reader.cursor] === REVERSE_SOLIDUS) {\n\t\t\tif (checkIfTwoCodePointsAreAValidEscape(ctx, reader)) {\n\t\t\t\tstring += String.fromCharCode(consumeEscapedCodePoint(ctx, reader));\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconsumeBadURL(ctx, reader);\n\n\t\t\tctx.onParseError({\n\t\t\t\tmessage: 'Invalid escape sequence while consuming a url token.',\n\t\t\t\tstart: reader.representationStart,\n\t\t\t\tend: reader.representationEnd,\n\t\t\t\tstate: [\n\t\t\t\t\t'4.3.6. Consume a url token',\n\t\t\t\t\t'U+005C REVERSE SOLIDUS (\\\\)',\n\t\t\t\t\t'The input stream does not start with a valid escape sequence',\n\t\t\t\t],\n\t\t\t});\n\n\t\t\treturn [\n\t\t\t\tTokenType.BadURL,\n\t\t\t\treader.representationString(),\n\t\t\t\treader.representationStart,\n\t\t\t\treader.representationEnd,\n\t\t\t\tundefined,\n\t\t\t];\n\t\t}\n\n\t\tstring += String.fromCharCode(reader.codePointSource[reader.cursor]);\n\t\treader.advanceCodePoint();\n\t}\n}\n","import { checkIfCodePointsMatchURLIdent } from '../checks/matches-url-ident';\nimport { APOSTROPHE, LEFT_PARENTHESIS, QUOTATION_MARK } from '../code-points/code-points';\nimport { isWhitespace } from '../code-points/ranges';\nimport { CodePointReader } from '../interfaces/code-point-reader';\nimport { Context } from '../interfaces/context';\nimport { TokenBadURL, TokenFunction, TokenIdent, TokenType, TokenURL } from '../interfaces/token';\nimport { consumeIdentSequence } from './ident-sequence';\nimport { consumeUrlToken } from './url-token';\n\n// https://www.w3.org/TR/2021/CRD-css-syntax-3-20211224/#consume-ident-like-token\nexport function consumeIdentLikeToken(ctx: Context, reader: CodePointReader): TokenIdent | TokenFunction | TokenURL | TokenBadURL {\n\tconst codePoints = consumeIdentSequence(ctx, reader);\n\n\tif (reader.codePointSource[reader.cursor] !== LEFT_PARENTHESIS) {\n\t\treturn [\n\t\t\tTokenType.Ident,\n\t\t\treader.representationString(),\n\t\t\treader.representationStart,\n\t\t\treader.representationEnd,\n\t\t\t{\n\t\t\t\tvalue: String.fromCharCode(...codePoints),\n\t\t\t},\n\t\t];\n\t}\n\n\tif (checkIfCodePointsMatchURLIdent(ctx, codePoints)) {\n\t\treader.advanceCodePoint();\n\n\t\tlet read = 0;\n\t\t// eslint-disable-next-line no-constant-condition\n\t\twhile (true) {\n\t\t\tconst firstIsWhitespace = isWhitespace(reader.codePointSource[reader.cursor]);\n\t\t\tconst secondIsWhitespace = isWhitespace(reader.codePointSource[reader.cursor+1]);\n\t\t\tif (firstIsWhitespace && secondIsWhitespace) {\n\t\t\t\tread += 2;\n\t\t\t\treader.advanceCodePoint(2);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst firstNonWhitespace = firstIsWhitespace ? reader.codePointSource[reader.cursor+1] : reader.codePointSource[reader.cursor];\n\t\t\tif (firstNonWhitespace === QUOTATION_MARK || firstNonWhitespace === APOSTROPHE) {\n\t\t\t\tif (read > 0) {\n\t\t\t\t\treader.advanceCodePoint(read);\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\tTokenType.Function,\n\t\t\t\t\treader.representationString(),\n\t\t\t\t\treader.representationStart,\n\t\t\t\t\treader.representationEnd,\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: String.fromCharCode(...codePoints),\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tbreak;\n\t\t}\n\n\t\tif (read > 0) {\n\t\t\treader.advanceCodePoint(read);\n\t\t}\n\n\t\treturn consumeUrlToken(ctx, reader);\n\t}\n\n\treader.advanceCodePoint();\n\treturn [\n\t\tTokenType.Function,\n\t\treader.representationString(),\n\t\treader.representationStart,\n\t\treader.representationEnd,\n\t\t{\n\t\t\tvalue: String.fromCharCode(...codePoints),\n\t\t},\n\t];\n}\n","import { checkIfFourCodePointsWouldStartCDO } from './checks/four-code-points-would-start-cdo';\nimport { checkIfThreeCodePointsWouldStartAnIdentSequence } from './checks/three-code-points-would-start-ident-sequence';\nimport { checkIfThreeCodePointsWouldStartANumber } from './checks/three-code-points-would-start-number';\nimport { checkIfTwoCodePointsStartAComment } from './checks/two-code-points-start-comment';\nimport { checkIfThreeCodePointsWouldStartCDC } from './checks/three-code-points-would-start-cdc';\nimport { APOSTROPHE, CARRIAGE_RETURN, CHARACTER_TABULATION, COLON, COMMA, COMMERCIAL_AT, DIGIT_0, DIGIT_1, DIGIT_2, DIGIT_3, DIGIT_4, DIGIT_5, DIGIT_6, DIGIT_7, DIGIT_8, DIGIT_9, FORM_FEED, FULL_STOP, HYPHEN_MINUS, LEFT_CURLY_BRACKET, LEFT_PARENTHESIS, LEFT_SQUARE_BRACKET, LESS_THAN_SIGN, LINE_FEED, NUMBER_SIGN, PLUS_SIGN, QUOTATION_MARK, REVERSE_SOLIDUS, RIGHT_CURLY_BRACKET, RIGHT_PARENTHESIS, RIGHT_SQUARE_BRACKET, SEMICOLON, SPACE } from './code-points/code-points';\nimport { isIdentStartCodePoint } from './code-points/ranges';\nimport { consumeComment } from './consume/comment';\nimport { consumeHashToken } from './consume/hash-token';\nimport { consumeIdentSequence } from './consume/ident-sequence';\nimport { consumeNumericToken } from './consume/numeric-token';\nimport { consumeWhiteSpace } from './consume/whitespace-token';\nimport { CSSToken, TokenType } from './interfaces/token';\nimport { Reader } from './reader';\nimport { consumeStringToken } from './consume/string-token';\nimport { consumeIdentLikeToken } from './consume/ident-like-token';\nimport { checkIfTwoCodePointsAreAValidEscape } from './checks/two-code-points-are-valid-escape';\nimport { ParserError } from './interfaces/error';\n\ninterface Stringer {\n\tvalueOf(): string\n}\n\nexport function tokenizer(input: { css: Stringer }, options?: { commentsAreTokens?: boolean, onParseError?: (error: ParserError) => void }) {\n\tconst css = input.css.valueOf();\n\n\tconst reader = new Reader(css);\n\n\tconst ctx = {\n\t\tonParseError: options?.onParseError ?? (() => { /* noop */ }),\n\t};\n\n\tfunction endOfFile() {\n\t\treturn reader.codePointSource[reader.cursor] === undefined;\n\t}\n\n\tfunction nextToken(): CSSToken | undefined {\n\t\treader.resetRepresentation();\n\n\t\tif (checkIfTwoCodePointsStartAComment(ctx, reader)) {\n\t\t\tif (options?.commentsAreTokens) {\n\t\t\t\treturn consumeComment(ctx, reader);\n\t\t\t} else {\n\t\t\t\tconsumeComment(ctx, reader);\n\t\t\t\treader.resetRepresentation();\n\t\t\t}\n\t\t}\n\n\t\tconst peeked = reader.codePointSource[reader.cursor];\n\t\tif (peeked === undefined) {\n\t\t\treturn [TokenType.EOF, '', -1, -1, undefined];\n\t\t}\n\n\t\tif (isIdentStartCodePoint(peeked)) {\n\t\t\treturn consumeIdentLikeToken(ctx, reader);\n\t\t}\n\n\t\t// Simple, one character tokens:\n\t\tswitch (peeked) {\n\t\t\tcase COMMA: {\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\treturn [TokenType.Comma, reader.representationString(), reader.representationStart, reader.representationEnd, undefined];\n\t\t\t}\n\t\t\tcase COLON: {\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\treturn [TokenType.Colon, reader.representationString(), reader.representationStart, reader.representationEnd, undefined];\n\t\t\t}\n\t\t\tcase SEMICOLON: {\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\treturn [TokenType.Semicolon, reader.representationString(), reader.representationStart, reader.representationEnd, undefined];\n\t\t\t}\n\t\t\tcase LEFT_PARENTHESIS: {\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\treturn [TokenType.OpenParen, reader.representationString(), reader.representationStart, reader.representationEnd, undefined];\n\t\t\t}\n\t\t\tcase RIGHT_PARENTHESIS: {\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\treturn [TokenType.CloseParen, reader.representationString(), reader.representationStart, reader.representationEnd, undefined];\n\t\t\t}\n\t\t\tcase LEFT_SQUARE_BRACKET: {\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\treturn [TokenType.OpenSquare, reader.representationString(), reader.representationStart, reader.representationEnd, undefined];\n\t\t\t}\n\t\t\tcase RIGHT_SQUARE_BRACKET: {\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\treturn [TokenType.CloseSquare, reader.representationString(), reader.representationStart, reader.representationEnd, undefined];\n\t\t\t}\n\t\t\tcase LEFT_CURLY_BRACKET: {\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\treturn [TokenType.OpenCurly, reader.representationString(), reader.representationStart, reader.representationEnd, undefined];\n\t\t\t}\n\t\t\tcase RIGHT_CURLY_BRACKET: {\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\treturn [TokenType.CloseCurly, reader.representationString(), reader.representationStart, reader.representationEnd, undefined];\n\t\t\t}\n\t\t\tcase APOSTROPHE:\n\t\t\tcase QUOTATION_MARK:\n\t\t\t\treturn consumeStringToken(ctx, reader);\n\t\t\tcase NUMBER_SIGN:\n\t\t\t\treturn consumeHashToken(ctx, reader);\n\n\t\t\tcase PLUS_SIGN:\n\t\t\tcase FULL_STOP: {\n\t\t\t\tif (checkIfThreeCodePointsWouldStartANumber(ctx, reader)) {\n\t\t\t\t\treturn consumeNumericToken(ctx, reader);\n\t\t\t\t}\n\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\treturn [TokenType.Delim, reader.representationString(), reader.representationStart, reader.representationEnd, {\n\t\t\t\t\tvalue: reader.representationString(),\n\t\t\t\t}];\n\t\t\t}\n\t\t\tcase DIGIT_0:\n\t\t\tcase DIGIT_1:\n\t\t\tcase DIGIT_2:\n\t\t\tcase DIGIT_3:\n\t\t\tcase DIGIT_4:\n\t\t\tcase DIGIT_5:\n\t\t\tcase DIGIT_6:\n\t\t\tcase DIGIT_7:\n\t\t\tcase DIGIT_8:\n\t\t\tcase DIGIT_9:\n\t\t\t\treturn consumeNumericToken(ctx, reader);\n\n\t\t\tcase LINE_FEED:\n\t\t\tcase CARRIAGE_RETURN:\n\t\t\tcase FORM_FEED:\n\t\t\tcase CHARACTER_TABULATION:\n\t\t\tcase SPACE:\n\t\t\t\treturn consumeWhiteSpace(ctx, reader);\n\n\t\t\tcase HYPHEN_MINUS: {\n\t\t\t\tif (checkIfThreeCodePointsWouldStartANumber(ctx, reader)) {\n\t\t\t\t\treturn consumeNumericToken(ctx, reader);\n\t\t\t\t}\n\n\t\t\t\tif (checkIfThreeCodePointsWouldStartCDC(ctx, reader)) {\n\t\t\t\t\treader.advanceCodePoint(3);\n\n\t\t\t\t\treturn [TokenType.CDC, reader.representationString(), reader.representationStart, reader.representationEnd, undefined];\n\t\t\t\t}\n\n\t\t\t\tif (checkIfThreeCodePointsWouldStartAnIdentSequence(ctx, reader)) {\n\t\t\t\t\treturn consumeIdentLikeToken(ctx, reader);\n\t\t\t\t}\n\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\treturn [TokenType.Delim, reader.representationString(), reader.representationStart, reader.representationEnd, {\n\t\t\t\t\tvalue: '-',\n\t\t\t\t}];\n\t\t\t}\n\n\t\t\tcase LESS_THAN_SIGN: {\n\t\t\t\tif (checkIfFourCodePointsWouldStartCDO(ctx, reader)) {\n\t\t\t\t\treader.advanceCodePoint(4);\n\n\t\t\t\t\treturn [TokenType.CDO, reader.representationString(), reader.representationStart, reader.representationEnd, undefined];\n\t\t\t\t}\n\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\treturn [TokenType.Delim, reader.representationString(), reader.representationStart, reader.representationEnd, {\n\t\t\t\t\tvalue: '<',\n\t\t\t\t}];\n\t\t\t}\n\n\t\t\tcase COMMERCIAL_AT: {\n\t\t\t\treader.advanceCodePoint();\n\t\t\t\tif (checkIfThreeCodePointsWouldStartAnIdentSequence(ctx, reader)) {\n\t\t\t\t\tconst identSequence = consumeIdentSequence(ctx, reader);\n\n\t\t\t\t\treturn [TokenType.AtKeyword, reader.representationString(), reader.representationStart, reader.representationEnd, {\n\t\t\t\t\t\tvalue: String.fromCharCode(...identSequence),\n\t\t\t\t\t}];\n\t\t\t\t}\n\n\t\t\t\treturn [TokenType.Delim, reader.representationString(), reader.representationStart, reader.representationEnd, {\n\t\t\t\t\tvalue: '@',\n\t\t\t\t}];\n\t\t\t}\n\n\t\t\tcase REVERSE_SOLIDUS: {\n\t\t\t\tif (checkIfTwoCodePointsAreAValidEscape(ctx, reader)) {\n\t\t\t\t\treturn consumeIdentLikeToken(ctx, reader);\n\t\t\t\t}\n\n\t\t\t\treader.advanceCodePoint();\n\n\t\t\t\tctx.onParseError({\n\t\t\t\t\tmessage: 'Invalid escape sequence after \"\\\\\"',\n\t\t\t\t\tstart: reader.representationStart,\n\t\t\t\t\tend: reader.representationEnd,\n\t\t\t\t\tstate: [\n\t\t\t\t\t\t'4.3.1. Consume a token',\n\t\t\t\t\t\t'U+005C REVERSE SOLIDUS (\\\\)',\n\t\t\t\t\t\t'The input stream does not start with a valid escape sequence',\n\t\t\t\t\t],\n\t\t\t\t});\n\n\t\t\t\treturn [TokenType.Delim, reader.representationString(), reader.representationStart, reader.representationEnd, {\n\t\t\t\t\tvalue: '\\\\',\n\t\t\t\t}];\n\t\t\t}\n\t\t}\n\n\t\treader.advanceCodePoint();\n\t\treturn [TokenType.Delim, reader.representationString(), reader.representationStart, reader.representationEnd, {\n\t\t\tvalue: reader.representationString(),\n\t\t}];\n\t}\n\n\treturn {\n\t\tnextToken: nextToken,\n\t\tendOfFile: endOfFile,\n\t};\n}\n","import { CSSToken } from '../interfaces/token';\n\nexport function cloneTokens(tokens: Array<CSSToken>): Array<CSSToken> {\n\tif ((typeof globalThis !== 'undefined') && 'structuredClone' in globalThis) {\n\t\treturn structuredClone(tokens);\n\t}\n\n\treturn JSON.parse(JSON.stringify(tokens));\n}\n"],"names":["Reader","cursor","source","codePointSource","length","representationStart","representationEnd","constructor","Array","i","charCodeAt","cursorPositionOfLastReadCodePoint","advanceCodePoint","n","readCodePoint","codePoint","undefined","unreadCodePoint","representationString","slice","resetRepresentation","start","end","TokenType","NumberType","HashType","mirrorVariantType","type","OpenParen","CloseParen","OpenCurly","CloseCurly","OpenSquare","CloseSquare","isToken","x","isArray","stringify","tokens","buffer","APOSTROPHE","ASTERISK","BACKSPACE","CARRIAGE_RETURN","CHARACTER_TABULATION","COLON","COMMA","COMMERCIAL_AT","DELETE","EXCLAMATION_MARK","FORM_FEED","FULL_STOP","GREATER_THAN_SIGN","HYPHEN_MINUS","INFORMATION_SEPARATOR_ONE","LATIN_CAPITAL_LETTER_E","LATIN_SMALL_LETTER_E","LEFT_CURLY_BRACKET","LEFT_PARENTHESIS","LEFT_SQUARE_BRACKET","LESS_THAN_SIGN","LINE_FEED","LINE_TABULATION","LOW_LINE","MAXIMUM_ALLOWED_CODEPOINT","NULL","NUMBER_SIGN","PERCENTAGE_SIGN","PLUS_SIGN","QUOTATION_MARK","REPLACEMENT_CHARACTER","REVERSE_SOLIDUS","RIGHT_CURLY_BRACKET","RIGHT_PARENTHESIS","RIGHT_SQUARE_BRACKET","SEMICOLON","SHIFT_OUT","SOLIDUS","SPACE","DIGIT_0","DIGIT_1","DIGIT_2","DIGIT_3","DIGIT_4","DIGIT_5","DIGIT_6","DIGIT_7","DIGIT_8","DIGIT_9","checkIfFourCodePointsWouldStartCDO","ctx","reader","digitsLow","digitsHigh","isDigitCodePoint","search","letterUppercaseLow","letterUppercaseHigh","isUppercaseLetterCodePoint","letterLowercaseLow","letterLowercaseHigh","isLowercaseLetterCodePoint","afUppercaseHigh","afLowercaseHigh","isHexDigitCodePoint","isLetterCodePoint","nonASCIILow","isNonASCIICodePoint","isIdentStartCodePoint","isIdentCodePoint","isNonPrintableCodePoint","isNewLine","isWhitespace","surrogateLow","surrogateHigh","isSurrogate","checkIfTwoCodePointsAreAValidEscape","checkIfThreeCodePointsWouldStartAnIdentSequence","checkIfThreeCodePointsWouldStartANumber","checkIfTwoCodePointsStartAComment","checkIfThreeCodePointsWouldStartCDC","consumeComment","onParseError","message","state","Comment","consumeEscapedCodePoint","hexSequence","push","codePointLiteral","parseInt","String","fromCharCode","consumeIdentSequence","result","consumeHashToken","hashType","Unrestricted","ID","identSequence","Hash","value","Delim","consumeNumber","Integer","repr","newPart","consumeDigits","Number","convertCodePointsToNumber","codePoints","s","iCodePoints","d","fCodePoints","f","t","eCodePoints","e","digitCodePointsToInteger","Math","pow","consumeNumericToken","numberValue","unit","Dimension","Percentage","consumeWhiteSpace","Whitespace","consumeStringToken","first","Error","next","BadString","u","U","r","R","l","L","checkIfCodePointsMatchURLIdent","consumeBadURL","consumeUrlToken","string","URL","BadURL","consumeIdentLikeToken","Ident","read","firstIsWhitespace","secondIsWhitespace","firstNonWhitespace","Function","tokenizer","input","options","css","valueOf","endOfFile","nextToken","commentsAreTokens","peeked","EOF","Comma","Colon","Semicolon","CDC","CDO","AtKeyword","cloneTokens","globalThis","structuredClone","JSON","parse"],"mappings":"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"}