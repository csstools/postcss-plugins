"use strict";var e,o=require("@csstools/css-parser-algorithms"),r=require("@csstools/css-tokenizer"),t=require("@csstools/css-calc"),n=require("@csstools/color-helpers");function rgb(e){{const o=rgbCommaSeparated(e);if(-1!==o)return o}{const o=rgbSpaceSeparated(e);if(-1!==o)return o}return-1}function rgbCommaSeparated(e){const u=[],a=[],l=[],i=[];let s=u;for(let n=0;n<e.value.length;n++){let c=e.value[n];if(!o.isWhitespaceNode(c)&&!o.isCommentNode(c)){if(o.isTokenNode(c)&&c.value[0]===r.TokenType.Comma){if(s===u){s=a;continue}if(s===a){s=l;continue}if(s===l){s=i;continue}if(s===i)return-1}if(o.isFunctionNode(c)){if("calc"!==c.getName().toLowerCase())return-1;const[[e]]=t.calcFromComponentValues([[c]],{toCanonicalUnits:!0,precision:100});if(!e||!o.isTokenNode(e))return-1;c=e}if(o.isTokenNode(c)){let e=255;if(s===i&&(e=1),c.value[0]===r.TokenType.Percentage){const e=c.value;s.push([r.TokenType.Number,(e[4].value/100).toString(),e[2],e[3],{value:e[4].value/100,type:r.NumberType.Number}]);continue}if(c.value[0]===r.TokenType.Number){const o=c.value;s.push([r.TokenType.Number,(o[4].value/e).toString(),o[2],o[3],{value:o[4].value/e,type:r.NumberType.Number}]);continue}}return-1}}if(1!==s.length)return-1;if(1!==u.length||1!==a.length||1!==l.length)return-1;return{channels:n.xyz.sRGB_to_XYZ_D50([u[0][4].value,a[0][4].value,l[0][4].value]),alpha:1===i.length?i[0][4].value:1,currentColorSpace:exports.ColorSpace.XYZ_D50,sourceColorSpace:exports.ColorSpace.sRGB}}function rgbSpaceSeparated(e){const u=[],a=[],l=[],i=[];let s=u;for(let n=0;n<e.value.length;n++){let c=e.value[n];if(o.isWhitespaceNode(c)||o.isCommentNode(c)){for(;o.isWhitespaceNode(e.value[n+1])||o.isCommentNode(e.value[n+1]);)n++;if(s===u){s=a;continue}if(s===a){s=l;continue}}else{if(!o.isTokenNode(c)||c.value[0]!==r.TokenType.Delim||"/"!==c.value[4].value){if(o.isFunctionNode(c)){if("calc"!==c.getName().toLowerCase())return-1;const[[e]]=t.calcFromComponentValues([[c]],{toCanonicalUnits:!0,precision:100});if(!e||!o.isTokenNode(e))return-1;c=e}if(o.isTokenNode(c)){let e=255;if(s===i&&(e=1),c.value[0]===r.TokenType.Percentage){const e=c.value;s.push([r.TokenType.Number,(e[4].value/100).toString(),e[2],e[3],{value:e[4].value/100,type:r.NumberType.Number}]);continue}if(c.value[0]===r.TokenType.Number){const o=c.value;s.push([r.TokenType.Number,(o[4].value/e).toString(),o[2],o[3],{value:o[4].value/e,type:r.NumberType.Number}]);continue}}return-1}if(s===i)return-1;s=i}}if(1!==s.length)return-1;if(1!==u.length||1!==a.length||1!==l.length)return-1;return{channels:n.xyz.sRGB_to_XYZ_D50([u[0][4].value,a[0][4].value,l[0][4].value]),alpha:1===i.length?i[0][4].value:1,currentColorSpace:exports.ColorSpace.XYZ_D50,sourceColorSpace:exports.ColorSpace.sRGB}}exports.ColorSpace=void 0,(e=exports.ColorSpace||(exports.ColorSpace={})).XYZ_D50="xyz-d50",e.XYZ_D65="xyz-d65",e.sRGB="srgb",exports.color=function color(e){if(o.isFunctionNode(e))return"rgb"===e.getName().toLowerCase()||"rgba"===e.getName().toLowerCase()?rgb(e):void 0};
