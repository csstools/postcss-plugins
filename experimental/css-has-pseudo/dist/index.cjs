"use strict";var e=require("postcss-selector-parser"),t=require("@csstools/selector-specificity");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=s(e);const i=e=>{const s={preserve:!0,specificityMatchingName:"does-not-exist",...e||{}},i=":not(#"+s.specificityMatchingName+")",c=":not(."+s.specificityMatchingName+")",a=":not("+s.specificityMatchingName+")";return{postcssPlugin:"css-has-pseudo-experimental",RuleExit:(e,{result:n})=>{if(!e.selector.includes(":has(")||function(e){let t=!1,s=e.parent;for(;!t&&s;)"atrule"===s.type&&(t=s.params.includes(":has(")&&s.params.startsWith("selector(")),s=s.parent;return t}(e))return;const o=e.selectors.map((o=>{if(!o.includes(":has("))return o;let l;try{l=r.default().astSync(o)}catch(t){return e.warn(n,`Failed to parse selector : ${o}`),o}if(void 0===l)return o;let u=!1;if(l.walkPseudos((e=>{u=u||":has"===e.value&&e.nodes,":visited"===e.value&&e.replaceWith(r.default.className({value:s.specificityMatchingName})),":any-link"===e.value&&(e.value=":link")})),!u)return o;const f="["+function(e){if(""===e)return"";let t,s="";for(let r=0;r<e.length;r++)t=e.charCodeAt(r).toString(36),s+=0===r?t:"-"+t;return"csstools-has-"+s}(l.toString())+"]",p=t.selectorSpecificity(l);let h=f;for(let e=0;e<p.a;e++)h+=i;const d=Math.max(1,p.b)-1;for(let e=0;e<d;e++)h+=c;for(let e=0;e<p.c;e++)h+=a;return h}));o.join(",")!==e.selectors.join(",")&&(s.preserve?e.cloneBefore({selectors:o}):e.selectors=o)}}};i.postcss=!0,module.exports=i;
